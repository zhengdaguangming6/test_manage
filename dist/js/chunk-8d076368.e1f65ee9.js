(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d076368"],{"3e11":function(e,r,t){},e08b:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e._self._c;return r("div",{staticClass:"allDiv"},[r("el-row",{attrs:{gutter:50}},[r("el-col",{attrs:{span:12}},[r("div",[r("el-form",{ref:"interfaceForm",staticClass:"demo-ruleForm",attrs:{model:e.interfaceForm,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"序号",prop:"id"}},[r("el-input",{attrs:{placeholder:"interfaceForm.id",disabled:!0},model:{value:e.interfaceForm.id,callback:function(r){e.$set(e.interfaceForm,"id",r)},expression:"interfaceForm.id"}})],1),r("el-form-item",{attrs:{label:"接口名称",prop:"interface_title"}},[r("el-input",{attrs:{placeholder:"请输入接口名称"},model:{value:e.interfaceForm.interface_title,callback:function(r){e.$set(e.interfaceForm,"interface_title",r)},expression:"interfaceForm.interface_title"}})],1),r("el-form-item",{attrs:{label:"登录账号",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.interfaceForm.phone,callback:function(r){e.$set(e.interfaceForm,"phone",r)},expression:"interfaceForm.phone"}})],1),r("el-form-item",{attrs:{label:"登录用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入登录用户名"},model:{value:e.interfaceForm.username,callback:function(r){e.$set(e.interfaceForm,"username",r)},expression:"interfaceForm.username"}})],1),r("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入登录密码"},model:{value:e.interfaceForm.password,callback:function(r){e.$set(e.interfaceForm,"password",r)},expression:"interfaceForm.password"}})],1),r("el-form-item",{attrs:{label:"请求方式",prop:"method"}},[r("el-select",{attrs:{placeholder:"请选择请求方式"},model:{value:e.interfaceForm.method,callback:function(r){e.$set(e.interfaceForm,"method",r)},expression:"interfaceForm.method"}},[r("el-option",{attrs:{label:"GET",value:"GET"}}),r("el-option",{attrs:{label:"POST",value:"POST"}}),r("el-option",{attrs:{label:"PUT",value:"PUT"}}),r("el-option",{attrs:{label:"DELETE",value:"DELETE"}}),r("el-option",{attrs:{label:"PATCH",value:"PATCH"}})],1)],1),r("el-form-item",{attrs:{label:"domain",prop:"domain"}},[r("el-select",{attrs:{placeholder:"请选择项目"},model:{value:e.interfaceForm.domain,callback:function(r){e.$set(e.interfaceForm,"domain",r)},expression:"interfaceForm.domain"}},[r("el-option",{attrs:{label:"tapi",value:"tapi"}}),r("el-option",{attrs:{label:"yapi",value:"yapi"}}),r("el-option",{attrs:{label:"m",value:"m"}}),r("el-option",{attrs:{label:"dapi",value:"dapi"}})],1)],1),r("el-form-item",{attrs:{label:"path",prop:"path"}},[r("el-input",{attrs:{placeholder:"请输入path"},model:{value:e.interfaceForm.path,callback:function(r){e.$set(e.interfaceForm,"path",r)},expression:"interfaceForm.path"}})],1),r("el-form-item",{attrs:{label:"GET传参",prop:"params"}},[r("el-input",{attrs:{type:"textarea",placeholder:'请输入参数，举例 {"name":"张三", "age": 18}'},model:{value:e.interfaceForm.params,callback:function(r){e.$set(e.interfaceForm,"params",r)},expression:"interfaceForm.params"}})],1),r("el-form-item",{attrs:{label:"POST传参(表单)",prop:"data"}},[r("el-input",{attrs:{type:"textarea",placeholder:'请输入参数，举例 {"name":"张三", "age": 18}'},model:{value:e.interfaceForm.data,callback:function(r){e.$set(e.interfaceForm,"data",r)},expression:"interfaceForm.data"}})],1),r("el-form-item",{attrs:{label:"POST传参(json)",prop:"json"}},[r("el-input",{attrs:{type:"textarea",placeholder:'请输入参数，举例 {"name":"张三", "age": 18}'},model:{value:e.interfaceForm.json,callback:function(r){e.$set(e.interfaceForm,"json",r)},expression:"interfaceForm.json"}})],1),r("el-form-item",{attrs:{label:"请求头",prop:"headers"}},[r("el-input",{attrs:{type:"textarea",placeholder:'请输入参数，举例 {"name":"张三", "age": 18}'},model:{value:e.interfaceForm.headers,callback:function(r){e.$set(e.interfaceForm,"headers",r)},expression:"interfaceForm.headers"}})],1),r("el-form-item",{attrs:{label:"断言",prop:"asserts"}},[r("el-input",{attrs:{type:"textarea",placeholder:'请输入断言，举例 code=1,data.userinfo.uid="34246",data.list[3].type=0'},model:{value:e.interfaceForm.asserts,callback:function(r){e.$set(e.interfaceForm,"asserts",r)},expression:"interfaceForm.asserts"}})],1),r("el-form-item",{attrs:{label:"是否执行",prop:"run"}},[r("el-radio",{attrs:{label:"1",border:""},model:{value:e.interfaceForm.run,callback:function(r){e.$set(e.interfaceForm,"run",r)},expression:"interfaceForm.run"}},[e._v("执行")]),r("el-radio",{attrs:{label:"0",border:""},model:{value:e.interfaceForm.run,callback:function(r){e.$set(e.interfaceForm,"run",r)},expression:"interfaceForm.run"}},[e._v("不执行")])],1),r("el-form-item",{attrs:{label:"备注",prop:"notes"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.interfaceForm.notes,callback:function(r){e.$set(e.interfaceForm,"notes",r)},expression:"interfaceForm.notes"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.editForm("interfaceForm")}}},[e._v("保 存")]),r("el-button",{on:{click:function(r){return e.resetForm("interfaceForm")}}},[e._v("重 置")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#F2F6FC"},on:{click:function(r){return e.sendRequestor(e.id)}}},[e._v("单接口测试")])],1)],1)],1)]),r("el-col",{attrs:{span:12}},[r("div",[r("el-card",{attrs:{shadow:"always"}},[r("json-viewer",{staticStyle:{"background-color":"rgba(159,138,127,0.11)"},attrs:{value:e.assertion_list,copyable:"","expand-depth":2,sort:""}})],1),r("el-card",{attrs:{shadow:"always"}},[r("json-viewer",{staticStyle:{"background-color":"rgba(159,138,127,0.11)"},attrs:{value:e.result,copyable:"","expand-depth":2,sort:""}})],1)],1)])],1)],1)},s=[],o={name:"Edit_interface",data(){return{result:{},assertion_list:[],interfaceForm:{},rules:{id:[],interface_title:[{required:!0,message:"请输入接口名称",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],username:[{required:!1,message:"请输入登录用户名",trigger:"blur"},{min:1,max:32,message:"长度在 1 到 32 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],method:[{required:!0,message:"请选择请求方式",trigger:"change"}],domain:[{required:!0,message:"请选择请求方式",trigger:"change"}],path:[{required:!0,message:"请输入url",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"}],params:[{required:!1,message:"请填写GET请求参数",trigger:"blur"},{min:0,max:500,message:"长度在 0 到 500 个字符",trigger:"blur"}],data:[{required:!1,message:"请填写POST请求表单参数",trigger:"blur"},{min:0,max:500,message:"长度在 0 到 500 个字符",trigger:"blur"}],json:[{required:!1,message:"请填写POST请求json参数",trigger:"blur"},{min:0,max:500,message:"长度在 0 到 500 个字符",trigger:"blur"}],headers:[{required:!1,message:"请填写请求头",trigger:"blur"},{min:0,max:1e3,message:"长度在 0 到 1000 个字符",trigger:"blur"}],asserts:[{required:!1,message:"请填写请求头",trigger:"blur"},{min:0,max:500,message:"长度在 0 到 500 个字符",trigger:"blur"}],run:[{required:!0,message:"是否执行"}],notes:[{required:!1,message:"请填写备注",trigger:"blur"}]},id:window.location.search.split("=")[1],loading:""}},methods:{editForm(e){this.$refs[e].validate(e=>{e&&(console.log("数据：",this.interfaceForm),this.axios.patch("/interface_test/interface/"+this.interfaceForm.id.toString()+"/",this.interfaceForm).then(e=>{if(1===e.data.code)this.$message({showClose:!0,message:"保存成功",type:"success"});else{if(1001!==e.data.code)return this.$message({showClose:!0,message:"保存失败",type:"error"}),!1;this.$message({showClose:!0,message:e.data.msg,type:"error"})}}).catch(e=>{this.$message.error("请求失败"),console.log("请求失败",e)}))})},resetForm(e){this.$refs[e].resetFields()},sendRequestor(e){let r=this;r.loading=!0,this.axios.get("interface_test/requestor/"+e+"/").then(e=>{e.data?(r.$message({message:e.data.msg,type:"success"}),r.result=e.data.data,r.assertion_list=e.data.assertion_list,r.loading=!1):(r.loading=!1,r.$message.error("接口测试失败")),console.log("请求成功",e),console.log("接口测试数据：",typeof e.data.data,e.data.data)}).catch(e=>{r.loading=!1,r.$message.error("请求失败"),console.log("请求失败",e)})}},created(){var e=window.location.search.split("=")[1];console.log("当前页面的参数",window.location.search,typeof window.location.search),console.log("当前页面的参数里的id",e,typeof e),this.axios.get("interface_test/interface/"+e+"/").then(e=>{this.interfaceForm=e.data.data,0===this.interfaceForm.run?this.interfaceForm.run="不执行":this.interfaceForm.run="执行"}).catch(e=>{console.log(e)})}},l=o,i=(t("e0d3"),t("2877")),n=Object(i["a"])(l,a,s,!1,null,"40e2502b",null);r["default"]=n.exports},e0d3:function(e,r,t){"use strict";t("3e11")}}]);
//# sourceMappingURL=chunk-8d076368.e1f65ee9.js.map